

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inputs and Outputs &mdash; qjazz-processes ${PIN_VERSION} documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=e556e3f7"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Job execution" href="execution.html" />
    <link rel="prev" title="Configuration Settings" href="configuration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            qjazz-processes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#quick-start">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing.html">Running QGIS Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing.html#exposing-processing-algorithms">Exposing processing algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html#callbacks">Callbacks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Inputs and Outputs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parameters-description">Parameters description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#literals-and-complex-types">Literals and complex types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compliance-to-ogc-standards">Compliance to OGC standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes-on-schemas">Notes on schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#value-passing-and-transmission-mode">Value passing and transmission mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qualified-input-and-output-values">Qualified input and output values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#multiple-media-types">Multiple media types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formats">Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-formats">Additional formats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="execution.html">Job execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobrealm.html">Job access</a></li>
<li class="toctree-l1"><a class="reference internal" href="openapi.html">Qjazz-Processes API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">qjazz-processes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Inputs and Outputs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/parameters.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="inputs-and-outputs">
<h1>Inputs and Outputs<a class="headerlink" href="#inputs-and-outputs" title="Link to this heading"></a></h1>
<section id="parameters-description">
<h2>Parameters description<a class="headerlink" href="#parameters-description" title="Link to this heading"></a></h2>
<p>Process description uses <a class="reference external" href="https://json-schema.org/draft/2020-12/json-schema-core">JSON Schema</a>
framents te define the inputs and outputs parameters as description in the
<cite>OGC process description &lt;https://docs.ogc.org/is/18-062r2/18-062r2.html#toc35</cite> document.</p>
<p>This makes the task more complicated for api client to implement generic client since
the variability of JSON schema is much more important than what was proposed by the WPS
standards, but there is some invrariant rules.</p>
<p>Qjazz-Processes map <cite>QgsProcessingParameterDefinition &lt;https://api.qgis.org/api/classQgsProcessingParameterDefinition.html&gt;_</cite> and <a class="reference external" href="https://api.qgis.org/api/classQgsProcessingOutputDefinition.html">QgsProcessingOutputDefinition</a> to JSON Schema.</p>
<p>The currrent implementation follow the schemas described in the <a class="reference external" href="https://github.com/opengeospatial/ogcapi-processes/tree/master">actual unreleased version of the standard</a>.</p>
<p>That means that it may not be compliant for most of actual OGC api compliance validators which
are strictly based on the version 1.0.0 of the standards.</p>
</section>
<section id="literals-and-complex-types">
<h2>Literals and complex types<a class="headerlink" href="#literals-and-complex-types" title="Link to this heading"></a></h2>
<p>Most of the parameters are <em>literals</em> or array of <em>literals</em>  types associated with constraints</p>
<p>Most of the time, there will be a <code class="docutils literal notranslate"><span class="pre">format</span></code> specification as described in
<a class="reference internal" href="#additional-formats"><span class="std std-ref">additional formats</span></a>
thal will give you hints for the format of the parameter.</p>
<p><em>Literals</em> will come with allowed values constraint expressed as JSON schema as
<a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/enum">enumerated values</a></p>
<p>This will be the case for <a class="reference external" href="https://api.qgis.org/api/classQgsProcessingParameterEnum.html">QgisProcessingParameterEnum</a>  or layer names constrained by a <a class="reference internal" href="processing.html#source-project"><span class="std std-ref">source project</span></a>.</p>
<p><em>Complex</em> input types will have <a class="reference internal" href="#media-types"><span class="std std-ref">media types</span></a> associated with them,
allowing the client to select the type of input.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Input with content media types should always be sent as <a class="reference external" href=":ref:qualified_values">qualified values</a>.</p>
</div>
</section>
<section id="compliance-to-ogc-standards">
<h2>Compliance to OGC standards<a class="headerlink" href="#compliance-to-ogc-standards" title="Link to this heading"></a></h2>
<p>The currrent implementation follow the schemas described in the <a class="reference external" href="https://github.com/opengeospatial/ogcapi-processes/tree/master">actual unreleased version of the standard</a>.</p>
<p>That means that it may not be compliant for most of actual OGC api compliance validators which
are strictly based on the version 1.0.0 of the standards.</p>
</section>
<section id="notes-on-schemas">
<h2>Notes on schemas<a class="headerlink" href="#notes-on-schemas" title="Link to this heading"></a></h2>
<p>Inputs and outputs value descriptions are described as json schemas. That is, the schema
determines completely the syntax of the value.</p>
<p>produced schemas are compliant to the following specifications</p>
<ul class="simple">
<li><p><a class="reference external" href="https://json-schema.org/draft/2020-12/release-notes">JSON Schema Draft 2020-12</a></p></li>
<li><p><a class="reference external" href="https://github.com/OAI/OpenAPI-Specification">OpenAPI Specification v3.1.0</a></p></li>
</ul>
</section>
<section id="value-passing-and-transmission-mode">
<h2>Value passing and transmission mode<a class="headerlink" href="#value-passing-and-transmission-mode" title="Link to this heading"></a></h2>
<p>The value passing method is bound to each input with the <code class="code docutils literal notranslate"><span class="pre">valuePassing</span></code> property.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="line-block">
<div class="line">The current implementation does not allow client to specify the transmission mode for outputs.</div>
<div class="line">That means that the <code class="code docutils literal notranslate"><span class="pre">transmissionMode</span></code> property is ignored in output specification in <cite>execute</cite>
requests.</div>
<div class="line">Instead each output individually requires to be passed either by value or by reference as
as server-side decision.</div>
</div>
</div>
<p>For informative purpose, a non-standard optional <code class="code docutils literal notranslate"><span class="pre">valuePassing</span></code> property may be added to the output description.</p>
<p>In all cases, references use <a class="reference external" href="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/common-core/link.yaml">links</a> as output value.</p>
<p>Inlines output value are returned either directly as described by their schema or as qualified value.</p>
</section>
<section id="qualified-input-and-output-values">
<span id="id2"></span><h2>Qualified input and output values<a class="headerlink" href="#qualified-input-and-output-values" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/processes-core/qualifiedInputValue.yaml">Qualified values</a> are used for encoding non Json strings.</p>
<p>For input values: a qualified value <strong>must</strong> be returned if the input schema has the <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/non_json_data#contentmediatype">contentMediaType</a> keyword.</p>
<p>For output values: a qualified value <strong>will</strong> be returned if the output schema has the <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/non_json_data#contentmediatype">contentMediaType</a> keyword.</p>
</section>
<section id="multiple-media-types">
<span id="media-types"></span><h2>Multiple media types<a class="headerlink" href="#multiple-media-types" title="Link to this heading"></a></h2>
<p>Inputs and outputs may describe multiple media types an inputs and outputs in <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/combining#oneOf">oneOf</a> composite schema.</p>
<p>Consider the following example for return a geometry:</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;anyOf&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
      <span class="s2">&quot;contentMediaType&quot;</span><span class="p">:</span> <span class="s2">&quot;application/wkt&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
      <span class="s2">&quot;contentMediaType&quot;</span><span class="p">:</span> <span class="s2">&quot;application/gml+xml&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson-geometry&quot;</span>
      <span class="s2">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/schemas/geometryGeoJSON.yaml&quot;</span>
    <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>One possible response would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;.....&quot;</span>
  <span class="s2">&quot;mediaType&quot;</span><span class="p">:</span> <span class="s2">&quot;application/wkt&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In the example above, the geojson response <strong>must not</strong> be returned as qualified value since it deos
not have a <code class="code docutils literal notranslate"><span class="pre">contentMediaType</span></code> annotation.</p>
</div>
</section>
<section id="formats">
<h2>Formats<a class="headerlink" href="#formats" title="Link to this heading"></a></h2>
<p>In the example above we have used the keyword <code class="code docutils literal notranslate"><span class="pre">format</span></code> in the geojson schema description.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">format</span></code> keyword is used for providing additonal semantic context that can help
the interpretation and validation of process input or output in an <code class="code docutils literal notranslate"><span class="pre">execute</span></code> request.</p>
<p>While the JsonSchema specification use the <code class="code docutils literal notranslate"><span class="pre">format</span></code> keyword for strings only, the OGC
standards extend its usage to any object.</p>
<p>Check the <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/string#format">built-in json schemas formats</a></p>
<p>The OGC standards defines additional formats:</p>
<dl class="field-list simple">
<dt class="field-odd">geojson-feature-collection<span class="colon">:</span></dt>
<dd class="field-odd"><p>Indicates that the object is an instance of a GeoJSON feature collection</p>
</dd>
<dt class="field-even">geojson-feature<span class="colon">:</span></dt>
<dd class="field-even"><p>Indicates that the object is an instance of a GeoJSON feature</p>
</dd>
<dt class="field-odd">geojson-geometry<span class="colon">:</span></dt>
<dd class="field-odd"><p>Indicates that the object is an instance of a GeoJSON geometry</p>
</dd>
<dt class="field-even">ogc-bbox<span class="colon">:</span></dt>
<dd class="field-even"><p>Indicates that the object is an instance of an <a class="reference external" href="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/processes-core/bbox.yaml">OGC bounding box</a></p>
</dd>
</dl>
</section>
<section id="additional-formats">
<span id="id5"></span><h2>Additional formats<a class="headerlink" href="#additional-formats" title="Link to this heading"></a></h2>
<p>According to JsonSchema specification, additional schema
properties start with an <code class="code docutils literal notranslate"><span class="pre">x-*</span></code> prefix</p>
<p>Additional OGC specific properties are prefixed with <code class="code docutils literal notranslate"><span class="pre">x-ogc-*</span></code>.</p>
<p>Using <code class="code docutils literal notranslate"><span class="pre">x-ogc-*</span></code> is a OGC standart proposal described in <a class="reference external" href="https://github.com/opengeospatial/ogcapi-features/issues/838">https://github.com/opengeospatial/ogcapi-features/issues/838</a> for the <cite>features</cite> api.</p>
<p>The following additional formats are used in Qjazz-Processes:</p>
<dl class="field-list simple">
<dt class="field-odd">x-ogc-crs<span class="colon">:</span></dt>
<dd class="field-odd"><p>Indicate that an string or object is a <a class="reference external" href="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/common-geodata/crs.yaml">CRS definition</a></p>
</dd>
<dt class="field-even">x-range<span class="colon">:</span></dt>
<dd class="field-even"><p>A 2-tuple of numbers indicating a inclusive range</p>
</dd>
<dt class="field-odd">x-range-exclude<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple of numbers indicating a exclusive range</p>
</dd>
<dt class="field-even">x-range-exclude-left<span class="colon">:</span></dt>
<dd class="field-even"><p>2-tuple of numbers indicating a left exclusive range</p>
</dd>
<dt class="field-odd">x-range-exclude-right<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple of numbers indicating a right exclusive range</p>
</dd>
<dt class="field-even">x-feature-source<span class="colon">:</span></dt>
<dd class="field-even"><p>A source name with optional attributes for selecting features</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="configuration.html" class="btn btn-neutral float-left" title="Configuration Settings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="execution.html" class="btn btn-neutral float-right" title="Job execution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, David Marteau - 3liz.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>